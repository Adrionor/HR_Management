<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Establecer Nueva Contraseña</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f4f7f6; display: grid; place-items: center; height: 100vh; margin: 0; }
        .container { width: 100%; max-width: 450px; padding: 2em; background-color: #ffffff; border-radius: 10px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); text-align: center; }
        h1 { color: #2c3e50; }
        form { text-align: left; margin-top: 2em; }
        label { display: block; margin-bottom: 0.5em; font-weight: 600; color: #34495e; }
        input[type="password"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 5px; background-color: #2ecc71; color: white; font-family: 'Poppins', sans-serif; font-size: 1em; font-weight: 600; cursor: pointer; margin-top: 1em; }
        .errorlist { list-style-type: none; padding: 0; margin-bottom: 1em; color: #e74c3c; font-weight: 600; font-size: 0.9em; text-align: left; }
        .helptext { font-size: 0.8em; color: #7f8c8d; display: block; margin-top: 4px; text-align: left; }
    </style>
</head>
<body>
    <div class="container">
        {% if validlink %}
            <h1>Establece tu Nueva Contraseña</h1>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Guardar Nueva Contraseña</button>
            </form>
        {% else %}
            <h1>Enlace no Válido</h1>
            <p style="color:red;">Este enlace de recuperación ya no es válido, es posible que ya haya sido utilizado o que haya expirado.</p>
            <a href="{% url 'password_reset' %}" style="text-decoration: none; color: #3498db; font-weight: 600;">Solicita un nuevo enlace aquí</a>
        {% endif %}
    </div>
</body>
</html>